# Chapter 4 관점-프로그래머가 보는 시각

## 4-1 응집도

### 모듈은 순수하게

- 응집도란 모듈에 포함된 기능의 순수함을 나타내는 척도로, 모듈의 강도를 측정하는 단위다.
- 응집도의 강도는 7단계로, 단계가 높을수록 순수하고 강하며 좋은 모듈이다.

#### 1단게: 암합적 강도

- 암합적 강도 모듈은 내 요소 간 특별한 관계가 인정되지 않는다.
- 모듈 내 중복된 명령의 패턴을 우연히 발견했다는 이유로 통합해서 하나의 모듈로 만든 경우다.
- 암합적 강도 모듈 내의 각 요소는 자기 모듈 내 다른 요소와의 관련성은 약하면서도 다른 모듈 내 요소와는 강한 관련을 갖는 경향이 있다.

#### 2단계: 논리적 강도

- 논리적 강도 모듈은 어떤 기능을 추상적으로 파악해서 모은 것이다.
- 기능을 추상적으로 파악한다는 것은 모든 입출력 조작을 모아서 모듈화하거나 여러 가지 데이터를 편집하기 위한 모듈을 작성한 경우다.

#### 3단계: 시간적 강도

- 시간적 강도 모듈은 특정 시점에 연속해서 실행되는 여러 개의 기능을 하나의 모듈로 모은 것이다.
- 기능 사이에 그다지 강한 관련성은 없으며, 특정 시점에 연속해서 실행될 뿐이다.

#### 4단계: 순서적 강도

- 순서적 강도 모듈은 문제를 처리하기 위해 관계된 여러 개의 기능 중 몇 가지를 실행한다.
- 커다란 기능의 일부 순서를 하나의 모듈로 만들었다면 순서적 강도이며, 순서도의 일부를 모듈화한 경우 등이 여기에 해당한다.

#### 5단계: 연락적 강도

- 연락적 강도 모듈은 기본적으로 순서적 강도의 특성을 갖는다.
- 순서적 강도와의 차이점은 모듈 내 기능 사이에서 데이터를 교환(연락)하거나 같은 데이터를 참조한다는 점이다.

#### 6단계: 정보적 강도

- 정보적 강도 모듈은 특정 자료구조를 다루는 여러 개의 기능을 하나의 모듈로 모은 것이다.
- 같은 자료구조(정보)는 가능한 한 특정 모듈에서만 접근하도록 한다.
- 정보적 강도 모듈은 진입점을 여러 개 가지며 각 진입점은 단일한 고유 기능을 실행한다.

#### 7단계: 기능적 강도

- 기능적 강도 모듈은 모듈 내의 모든 명령이 하나의 역할(기능)을 실행하기 위해 서로 관련된 모듈로, 응집도가 가장 높은 모듈이다.
- 기능적 강도를 갖는 모듈의 변경은 해당 모듈만으로 처리할 수 있으며, 다른 모듈에 미치는 영향도는 다른 강도의 영향도보다 작다.

### 섞여 있는 모듈은 깨지기 쉽다

- 코드는 모듈로 분할함으로써 통제가 가능해진다.
- 분할된 모듈은 톡립성이 중요하다.
  - 독립성은 코드의 복잡함을 감소시키고 결과적으로 코드의 신뢰성을 높이며 유지보수하기 쉽게 만든다.
- 응집도가 낮은 모듈의 문제
  - 코드를 이해하기 어렵다.
  - 코드를 유지보수하기 어렵다.
  - 코드를 재사용하기 어렵다.
  - 코드가 취약하며 변경에 따른 영향을 끊임없이 받는다.
- 응집도가 높은 모듈의 장점
  - 코드 설계의 명확함과 이해도가 높아진다.
  - 코드의 유지보수와 확장이 쉽다.
  - 코드의 재사용성이 촉진된다.
  - 모듈 간의 소결합성도 동시에 촉진된다.

### 고강도 모듈을 지향한다

- 모듈의 독립성을 높이려면 가능한 한 기능적 강도 모듈을 지향한다.

## 4.2 결합도

### 모듈 간의 소원하게

- 결합도란 모듈끼리 갖는 관계의 밀접함을 나타내는 척도로, 어떤 결합의 굵기를 측정하는 단위다.
- 결합도의 수준은 6단계로, 단계가 높을수록 관계가 약하고 느슨한 결합이며 좋은 모듈이라고 할 수 있다.

#### 1단계: 내용 결합

- 내용 결합이란 한 모듈과 다른 모듈이 일부를 공유하는 모듈 결합 방식이다.
- 다른 모듈 내의 외부에 선언되지 않은 데이터를 직접 참조하거나 명령의 일부를 공유하는 경우가 여기에 해당한다.
- 내용 결합은 한쪽 모듈의 변경이 다른 모듈에 영향을 미친다.

#### 2단계: 공통 결합

- 공통 결합이란 공통 영역에 정의된 데이터를 몇 개 모듈이 공동으로 사용하는 모듈 결합 방식이다.
- 공통 영역에 정의된 데이터란 전역 변수를 말한다.
- 공통 결합의 단점
  - 공통 영역 데이터는 모듈 간의 인터페이스상에 나타나지 않으므로 코드 해독을 매우 어렵게 만든다.
  - 공통 영역 데이터는 원래 해당 데이터와 관계가 없는 모듈에서도 마음만 먹으면 사용할 수 있으므로 코드의 안정성이 낮아진다.
  - 공통 결합된 모듈은 공통 영역 데이터를 통해 여러 가지 모듈과 이어져 있으므로 재사용성이 저해된다.

#### 3단계: 외부 결합

- 외부 결합이란 외부에 선언된 데이터를 공유하는 모듈 결합 방식이다.
- 외부에 선언된 데이터란 public으로 선언된 변수를 말한다.

#### 4단계: 제어 결합

- 제어 결합이란 호출하는 모듈 쪽에서 호출받는 모듈의 제어를 지시하는 데이터를 파라미터로 넘겨주는 모듈 결합 방식이다.
- 제어 결합에서는 파라미터의 하나로 switch 변수를 넘겨주면서 호출받는 모듈이 그때 수행할 기능을 지시한다.

#### 5단계: 스탬프 결합

- 스탬프 결합이란 공통 영역에 없는 자료구조를 2개의 모듈에서 교환하는 모듈 결합 방식이다.
- 자료구조의 교환은 파라미터를 매개로 수행한다.

#### 6단계: 데이터 결합

- 데이터 결합이란 모듈 간의 인터페이스로 스칼라형 데이터 요소만을 파라미터로 교환하는 모듈 결합 방식이다.
- 상대 모듈을 블래박스화할 수 있으므로 결합도는 가장 약하다.

### 상호 종속되는 모듈은 깨지기 쉽다

- 결합이 밀접한 모듈은 서로 종속되며 영향을 미치므로 여러 가지 문제가 생긴다.
- 모듈을 사용하려면 해당 모듈이 종속되고 있는 모듈도 필요하므로 재사용하기 어렵다.

### 저결합 모듈을 지향한다

- 모듈의 독립성을 높이려면 모듈 간의 인터페이스는 가능한 한 낮은 단계의 결합도를 지향한다.
- 데이터는 가능한 한 파라미터로 넘겨준다.
- 데이터는 가능한 한 전역 변수로 두지 않으며, 특정 시점에만 필요한 데이터라면 지역 변수로 두도록 한다.
- 넘겨주는 값에 따라 동작이 바뀌는 코드를 작성하지 않는다.

### 하이브리드 결합

- 샹황에 따라 하이브리드적으로 반환값이 달라지므로 함수를 사용하는 쪽에서 이를 의식하고 사용해야 한다.
- 하이브리드 결합은 결합도로는 다소 높다고 볼 수 있다.

### 결합의 개수와 방향

- 결합도에 관한 착안점은 결합의 강도와 굵기다.

### 멱등성과 안전성

#### 멱등성

- 멱등성이란 어떤 조작을 반복해서 수행해도 결과가 같은 것을 의미하는 수학 용어다.
- 같은 함수를 반복해서 호출해도 반드시 같은 결과를 얻을 수 있다.

#### 안전성

- 안전이란 조작 대상의 상태를 변화시키지 않는 것을 의미한다.
- 상태에 변화를 미치는 것을 부작용이라고 부르므로, 안전은 조작 대상의 상태에 부작용이 없는 것이라고 말할 수 있다.
