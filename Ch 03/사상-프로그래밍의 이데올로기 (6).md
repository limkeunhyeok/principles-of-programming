# Chapter 3 사상-프로그래밍의 이데올로기

## 3.29 7가지 설계 원리

### 코드 타당성 리뷰 관점

- 실제 소프트웨어 개발 현장의 분석을 통해 도출되었으며, 품질 좋은 코드를 만들기 위한 경험칙이다.
- 이 원리는 코드 리뷰할 때 점검할 관점으로 사용하며, 다음 7가지 관점이 있다.
  - 단순 원리
  - 동형 원리
  - 대칭 원리
  - 계층 원리
  - 선형 원리
  - 명증 원리
  - 안전 원리

### 코드 가치관에는 누락와 오차가 없어야 한다

- 소프트웨어의 품질을 담보하는 기법으로 코드 리뷰는 상당히 효과적이다.

### 코드를 작성할 때도 사용한다

- 7가지 설계 원리를 공통적인 관점으로 코드 리뷰에 사용한다.
- 코드 리뷰의 관점이므로 코드를 작성할 때 고려해야 할 관점으로도 사용할 수 있다.

## 3.30 단순 원리

### 단순함을 중시한다

- 단순 원리란 단순함을 중시한다는 원리다.
- 프로그래밍 생초보도 읽을 수 있을 만큼 일관되고 단순한 코드를 작성해야 한다.

### 버그는 복잡한 곳에서 나온다

- 소프트웨어의 오류는 특정 부분에서 집중적으로 발견되는데, 그 부분은 십중팔구 코드가 복잡한 곳이다.
- 단순하고 직관적인 코드를 작성하기로 마음먹는다면 거기서 오류가 발생할 일은 없을 것이다.

### 자연스러운 코드를 작성한다

- 고급 기술을 사용하지 말고 단순한 방식으로 코드를 작성한다.
- 코드가 복잡한 곳에 오류가 집중된다면 오류가 들어올 여지가 없을 정도로 단순하게 작성하면 된다.

## 3.31 동형 원리

### 형태를 중시한다

- 동형 원리란 형태를 중시한다는 원리다.
- 똑같은 것은 똑같이 다루도록 신경 쓴다.

### 다른 것이 눈에 띈다

- 똑같은 것이 똑같이 표현되어 있으면 반대로 다른 것이 돋보인다.
- 다른 것이란 바르지 않은 것 혹은 버그의 원인이 되기 쉬운 부분이다.
- 동형 원리는 그래픽이나 제품 디자이너가 균형이 잘 맞고 아름다운 형태를 지향하는 것과 비슷하다.
- 통일감 있는 코드에서는 아름다움이 느껴진다.
- 아름다룬 코드는 이해하기 쉬운 경향이 있으므로 코드의 가독성을 높이는 데 기여한다.

### 일관성 있는 코드를 작성한다

- 프로그래머의 자아가 일관성 있는 코드 작성을 방해한다.
- 똑똑함이나 독창성은 다른 곳에서 발휘해야 할 면모다.
- 독창성은 억제하고 일관성을 우선시한다.

## 3.32 대칭 원리

### 형태의 대칭성을 중시한다

- 대칭 원리란 형태의 대칭성을 중시한다는 원리다.
- 어떤 처리에 관해 대응이 되는 것도 함께 생각해야 한다는 뜻이다.

### 읽을 때 예측이 된다

- 코드의 형태에 대칭성이 있으면 예측하기 쉽고 코드를 이해하는 속도가 빨라진다.
- 시각적으로도 아름다운 코드가 되므로 이 역시 코드 이해 속도를 높여준다.
- 코드 설계 시에 대칭성을 염두에 두면 생각의 누락을 방지할 수 있다.

### 대칭성 있는 코드를 작성한다

- 제어 조건에는 반드시 조건에 대응하는 반조건이 있다.
  - 제어 조건에 정합성을 갖게 하려면 반조건에 대한 정합성도 검토한다.
- 예외적 상황은 특수한 경우이기 때문에 대칭성을 무너뜨리고 오류의 온상이 된다.
  - 특수한 경우가 너무 많다면 애초에 요구사항이 제대로 정리되지 않았을 가능성이 있다.

## 3.33 계층 원리

### 계층을 중시한다

- 계층 원리란 구조의 계층성을 중시한다는 원리다.
- 모든 요소의 주종 관계, 전후 관계, 본말 관계 등 계층 관계를 항상 의식해서 관계성이 정리되도록 구축해야 한다.

### 계층 구조는 읽기 쉽다

- 코드에 명확하게 표현된 계층 구조가 있으면 읽는 사람이 전체를 추상화해서 이해할 수 있다.
- 필요에 따라서는 계층을 내려가 더욱 상세한 수준을 파악할 수 있다.

### 추상 계층 구조가 있는 코드를 작성한다

- 코드의 각각에 관해 추상 수준을 의식해서 계층 구조를 구축한다.
- 하나의 계층은 추상화 수준이 같은 요소만으로 구성한다.

## 3.34 선형 원리

### 처리의 직선적 흐름을 중시한다

- 선형 원리란 처리의 직선적 흐름을 중시한다는 원리다.
- 하나의 기능은 여러 가지 다른 기능의 묶음에 의해 실현되는 선형 결합적인 것이 단순하고 좋은 구조다.

### 직선적 처리는 읽기 쉽다

- 처리의 흐름이 복잡한 코드는 오류의 온상이 된다.
- 계층의 상위에서 하위를 향해 흘러가는 처리의 흐름을 의식해서 반복을 피하고 한 줄로 연결될 법한 시퀀스로 만들면 가독성이 매우 향상된다.
  - 보수성도 좋아지며, 기능 추가 등의 개선도 쉬워진다.
- 일반적으로 위에서 아래를 향해 한 방향으로 내려가는 코드 흐름은 단순명쾌하고 이해하기 쉽다.

### 분기가 적은 코드를 작성한다

- 처리의 분기를 적게 만들고 처리의 흐름을 직선적으로 읽을 수 있는 코드로 만든다.
- 처리의 일관성이나 경로에 신경을 쓰면서 때로는 코드를 부감해 보고 복잡해져 있지 않은지 확인한다.
- 보수해 가면서 코드가 너무 복잡해졌다면 재구축하는 방법도 고려한다.

## 3.35 명증 원리

### 로직의 명증성을 중시한다

- 명증 원리란 로직의 명증성을 중시한다는 원리다.
- 명증성이란 확실하게 증명한다는 의미다.
  - 한분에 봐도 분명하게 옳다고 말할 수 있는 코드를 작성해야 한다.
- 코드만으로 명증할 수 없다면 주석을 달거나 별도 문서를 작성해 도표를 그려 넣어서라도 올바르다는 점을 증명해 둔다.

### 불확실성을 제거한다

- 코드는 여러 번 읽히므로 읽기 쉬운 상태로 만들어 두어야 한다.
- 기발한 코드는 컴퓨터를 동작시킨다는 것 말고는 의미가 없다.
  - 코드는 사람이 읽고 사람이 수정하는 것이며, 사람을 위한 코드를 작성할 필요가 있다.

### 로직이 명료한 코드를 작성한다

- 로직이 명료한 코드를 작성하도록 한다.
- 로직을 직관적이고 이해하기 쉽게 만든다.
- 코드를 읽는 사람이 의문스럽게 생각할 만한 것은 제거하든지 주석을 달아 둔다.
- 누구나 쉽게 알고 떠올릴 수 있는 용어를 사용하도록 한다.

### 코드 재사용의 위험성

- 코드는 한눈에 봐도 알 수 있도록, 걸리는 것 없이 이해할 수 있도록, 오해 없이 전해지도록 작성되어야 한다.
- 기존 코드를 재사용할 때는 해당 코드를 제대로 이해한 다음에 가져다 써야 한다.
- 재사용 자체는 좋지만 위험성이 따른다.
  - 동작 사양과 컨텍스트를 제대로 확인하고 나서 전환하도록 한다.

### 코드 오류 수정의 위험성

- 기존 코드에서 오류가 발생해 수정하려면 재사용할 때보다 더 해당 코드를 깊이 있게 이해하고 나서 착수해야 한다.
- 코드를 완전히 이해하고 오류 패턴을 정확하게 이해해야 한다.

## 3.36 안전 원리

### 안전성을 중시한다

- 안전 원리란 안전성을 중시한다는 원리다.
- 필연성이 없는 곳이나 모호한 곳은 안전한 쪽으로 설계하고 프로그래밍해 두는 것이다.

### 대형 사고로의 발전을 방지한다

- 소프트웨어가 제공하는 서비스는 하드웨어와 마찬가지로 안전해야 한다.
- 어떤 상황에 대해서 다양하게 상정하고 각각이 안전한 방향으로 동작하도록 설계한다.

### 코드를 안전한 쪽으로 작성한다

- 필연성이 없는 곳이나 모호한 곳은 안전한 쪽으로 설계한다.
  - 모든 동작을 철저히 밝혀내서 각각이 안전해지는 방안을 고려해야 한다.

### 코드의 필요조건과 충분조건

- 코드의 구현에 대해 요구사항이나 기능의 설명서는 필요조건에 불과하다.
- 코드를 작성하기 위한 정보가 설명서밖에 없다면 충분조건을 만족하는 코드를 작성할 수 있는지는 프로그래머에 의한 부분이 커진다.
- 프로그래머가 충분조건을 충족하기까지의 간극 중 하나가 바로 안전성이다.
